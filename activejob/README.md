# Active Job

Web 开发过程中，会遇到很多需要异步处理的任务：发邮件、发短信、图片处理、下载东西、spam 检测等。一般来说，这样的程序执行时间长，并且不需要及时把结果反馈给用户。我们可以将这些处理时间长的请求剥离出来异步处理，并及时响应页面的请求。

市面上已经有不少和这有关的 gem，它们封装好了接口，我们直接调用即可，比如受到广泛使用的 Resque、Sidekiq、Delayed job 等。

这些 gem 做的事情都大同小异，但特性上却各自不同：

|                   | 异步 | 队列 | 延时    | 优先级 | 超时 | 重试 |
|-------------------|-------|--------|------------|------------|---------|---------|
| Delayed Job       | 是   | 是    | 是        | 任务        | 全局  | 全局  |
| Resque            | 是   | 是    | 是 (Gem)  | 队列      | 全局  | 是     |
| Sidekiq           | 是   | 是    | 是        | 队列      | 否      | 任务     |

并且，在实际使用过程中，你会关心性能怎么样、是否支持多线程、持久化方案，以及 API 使用难易程度、稳定性等问题。也就是说，你有可能要更改异步处理所使用的 gem.

必要的话，你要快速切换到另一种异步处理方案上。更进一步，你不想被绑在一颗树上。

Active Job 解决了这个问题，它统一了接口，**不同的延迟任务，一样的 API.**

在 Delayed Job、Resque、Sidekiq 等延迟任务之间切换，还要改代码？
以后就不必了...

虽然这几个延迟任务 gem 使用上类似，但语法上多少有一点不同。
新的 ActiveJob 组件统一了接口，使用和切换都会变得更容易。
